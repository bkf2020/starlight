<!doctype html>
{% load static %}
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
		<title>&#x1F320; Starlight: List of Problems</title>
        <script type="text/javascript" src="{% static 'js/colorChange.js' %}"></script>
		<link rel="stylesheet" type="text/css" href="{% static 'css/main.css' %}" />
	</head>
    <body>
        <div style="display: flex; justify-content: space-between; align-items: center;">
			<div>
				<h1>&#x1F320; Starlight: List of Problems</h1>
			</div>
			<div style="float: right; margin-left: 0.7em;">
                <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; margin-left: 0.5em;">
                    <div style="margin-right: 0.5em; display: block;">
                        <button style="background-color: transparent; margin: initial; padding: initial; display: block;" id="colorModeIndBtn">
                            <div style="display: flex; justify-content: center; align-items: center;">
                                <img src="{% static 'img/darkmode.png' %}" width="24" height="24" id="colorModeInd">
                            </div>
                        </button>
                    </div>
					<div>
				        {% if user.is_authenticated %}
					        <a href="{% url 'profile' %}">{{ user.username }}</a> |
					        <a href="{% url 'logout' %}">Logout</a>
				        {% else %}
                            <a href="{% url 'login' %}?next={{ full_path|urlencode }}">Login</a> |
					        <a href="{% url 'register' %}">Register</a>
				        {% endif %}
                    </div>
                </div>
			</div>
            <script type="text/javascript" src="{% static 'js/colorChangeButton.js' %}"></script>
		</div>
        <p>
            Over <u><b>20,000</b></u> problems available. AMC 8/10/12 and AIME problems from years 2010-2023 are in the database. USAJMO/USAMO problems from years
            2002-2023 available. USACO problems from years 2014 to 2023 of all divisions. Codeforces, AtCoder, DMOJ problems in the problemset are updated daily.
        </p>
        <form method="GET" action="{% url 'problems-list' %}" style="display: flex; flex-wrap: wrap; gap: 0.3em; align-items: center; justify-content: center;">
            <input type="text" name="search" placeholder="Search for a problem.. (max length 200)" maxlength="200" value="{{ request.GET.search }}" style="width: 80%; max-width: 700px; border-radius: 0.5em; height: 2em; font-size: inherit; font-family: inherit; border: 2px #81a1c1 solid; padding: 0.1em;">
            <input type="text" name="problemType" placeholder="Problem type.." value="{{ request.GET.problemType }}" style="display: none;">
            <div>
                <button type="submit" class="bg-blue">Search</button><a href="{% url 'problems-list' %}?problemType={{ request.GET.problemType }}" class="buttonLink bg-cyan">Reset</a>
            </div>
        </form>
        <div style="text-align: center; margin-top: 0.5em;">
            <b>Filter by type: </b>
            {% if request.GET.problemType == None or request.GET.problemType == "" %}
                <a href="{% url 'problems-list' %}?search={{ request.GET.search|urlencode }}" class="buttonLink bg-red">All</a>
            {% else %}
                <a href="{% url 'problems-list' %}?search={{ request.GET.search|urlencode }}" class="buttonLink">All</a>
            {% endif %}
            {% if request.GET.problemType == "codeforces" %}
                <a href="{% url 'problems-list' %}?search={{ request.GET.search|urlencode }}&problemType=codeforces" class="buttonLink bg-red">Codeforces</a>
            {% else %}
                <a href="{% url 'problems-list' %}?search={{ request.GET.search|urlencode }}&problemType=codeforces" class="buttonLink">Codeforces</a>
            {% endif %}
            {% if request.GET.problemType == "atcoder" %}
                <a href="{% url 'problems-list' %}?search={{ request.GET.search|urlencode }}&problemType=atcoder" class="buttonLink bg-red">AtCoder</a>
            {% else %}
                <a href="{% url 'problems-list' %}?search={{ request.GET.search|urlencode }}&problemType=atcoder" class="buttonLink">AtCoder</a>
            {% endif %}
            {% if request.GET.problemType == "dmoj" %}
                <a href="{% url 'problems-list' %}?search={{ request.GET.search|urlencode }}&problemType=dmoj" class="buttonLink bg-red">DMOJ</a>
            {% else %}
                <a href="{% url 'problems-list' %}?search={{ request.GET.search|urlencode }}&problemType=dmoj" class="buttonLink">DMOJ</a>
            {% endif %}
            {% if request.GET.problemType == "usaco" %}
                <a href="{% url 'problems-list' %}?search={{ request.GET.search|urlencode }}&problemType=usaco" class="buttonLink bg-red">USACO</a>
            {% else %}
                <a href="{% url 'problems-list' %}?search={{ request.GET.search|urlencode }}&problemType=usaco" class="buttonLink">USACO</a>
            {% endif %}
            {% if request.GET.problemType == "AMC_8" %}
                <a href="{% url 'problems-list' %}?search={{ request.GET.search|urlencode }}&problemType=AMC_8" class="buttonLink bg-red">AMC 8</a>
            {% else %}
                <a href="{% url 'problems-list' %}?search={{ request.GET.search|urlencode }}&problemType=AMC_8" class="buttonLink">AMC 8</a>
            {% endif %}
            {% if request.GET.problemType == "AMC_10" %}
                <a href="{% url 'problems-list' %}?search={{ request.GET.search|urlencode }}&problemType=AMC_10" class="buttonLink bg-red">AMC 10</a>
            {% else %}
                <a href="{% url 'problems-list' %}?search={{ request.GET.search|urlencode }}&problemType=AMC_10" class="buttonLink">AMC 10</a>
            {% endif %}
            {% if request.GET.problemType == "AMC_12" %}
                <a href="{% url 'problems-list' %}?search={{ request.GET.search|urlencode }}&problemType=AMC_12" class="buttonLink bg-red">AMC 12</a>
            {% else %}
                <a href="{% url 'problems-list' %}?search={{ request.GET.search|urlencode }}&problemType=AMC_12" class="buttonLink">AMC 12</a>
            {% endif %}
            {% if request.GET.problemType == "AIME" %}
                <a href="{% url 'problems-list' %}?search={{ request.GET.search|urlencode }}&problemType=AIME" class="buttonLink bg-red">AIME</a>
            {% else %}
                <a href="{% url 'problems-list' %}?search={{ request.GET.search|urlencode }}&problemType=AIME" class="buttonLink">AIME</a>
            {% endif %}
            {% if request.GET.problemType == "USAJMO" %}
                <a href="{% url 'problems-list' %}?search={{ request.GET.search|urlencode }}&problemType=USAJMO" class="buttonLink bg-red">USAJMO</a>
            {% else %}
                <a href="{% url 'problems-list' %}?search={{ request.GET.search|urlencode }}&problemType=USAJMO" class="buttonLink">USAJMO</a>
            {% endif %}
            {% if request.GET.problemType == "USAMO" %}
                <a href="{% url 'problems-list' %}?search={{ request.GET.search|urlencode }}&problemType=USAMO" class="buttonLink bg-red">USAMO</a>
            {% else %}
                <a href="{% url 'problems-list' %}?search={{ request.GET.search|urlencode }}&problemType=USAMO" class="buttonLink">USAMO</a>
            {% endif %}
        </div>
        <div class="alert bg-green" style="margin-bottom: 0.5em !important;">
            <details>
            <p>
                <summary><b>Need help searching?</b> Click for format/examples of problems</summary>
                <ul>
                    <li><b>AMC 8:</b> [year] AMC 8 Problem #, <i>Ex: 2013 AMC 8 Problem 1</i></li>
                    <li><b>AMC 10:</b> [year] AMC 10A Problem # OR [year] AMC 10B Problem #, <i>Ex: 2015 AMC 10A Problem 16</i></li>
                    <li><b>AMC 12:</b> [year] AMC 12A Problem # OR [year] AMC 12B Problem #, <i>Ex: 2021 AMC 12B Problem 25</i></li>
                    <li><b>AIME:</b> [year] AIME I Problem # OR [year] AIME II Problem #, <i>Ex: 2013 AIME I Problem 8</i></li>
                    <li><b>USAJMO/USAMO:</b> [year] USAJMO/USAMO Problem #, <i>Ex: 2023 USAJMO Problem 1</i></li>
                    <li><b>Codeforces:</b> Codeforces [contest id (e.g. 101)][problem id (e.g. A, B, C)]: [Codeforces problem name], <i>Ex: Codeforces 1336F: Journey</i></li>
                    <li><b>AtCoder:</b> AtCoder [contest id (e.g. ABC314, ARC164, ZONE2021)]: [problem id (A, B, C)]. [Problem name], <i>Ex: AtCoder ZONE2021: E. Sneaking</i></li>
                    <li><b>DMOJ:</b> DMOJ [contest name (if applicable)] [problem number (e.g. P1)] - [Problem name], <i>Ex: DMOJ Yet Another Contest 3 P1 - Shell Swap Scam</i></li>
                    <li><b>USACO:</b> [year] [contest month (e.g. January, US Open)], [division (e.g. Gold)]: [Problem name], <i>Ex: USACO 2023 US Open Contest, Bronze: Rotate and Shift</i></li>
                </ul>
            </p>
            </details>
        </div>
        {% if request.user.is_authenticated %}	
			<a class="bg-cyan buttonLink" href="{% url 'journal' %}" style="margin-bottom: 0.6em;">Go to journal</a>
		{% endif %}
        {% if messages %}
            <div id="messages">
            {% for message in messages %}
                <div class="alert alert-{{ message.tags }}">
                    {{ message }}
                </div>
            {% endfor %}
            </div>
        {% endif %}
        {% if page_obj %}
            <table><tbody>
                <tr>
                    <th>ID</th>
                    <th>Problem Name</th>
                    {% if request.user.is_authenticated %}	
                        <th>Journal</th>
                    {% endif %}
                </tr>
                {% for problem in page_obj %}
                    <tr>
                        <td>{{ problem.id }}</td>
                        <td><a href="{% url 'problems-view' problem.id %}">{{ problem.name }}</a></td>
                        {% if request.user.is_authenticated %}	
                            <td><a href="{% url 'journal-create' problem.id %}?next={{ full_path|urlencode }}#messages" class="buttonLink bg-blue" style="margin: 0px 0px 0px 0px !important;">Add to journal</a></td>
                        {% endif %}
                    </tr>
                {% endfor %}
            </tbody></table>
        {% endif %}
        <div class="pagination">
            {% if page_obj.has_previous %}
   	        	<a class="paginationLink paginationArrow" href="?page={{ page_obj.previous_page_number }}&search={{ request.GET.search|urlencode }}&problemType={{ request.GET.problemType }}">&larr;</a>
			{% endif %}
			<span>
				Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}.
			</span>
			{% if page_obj.has_next %}
   	        	<a class="paginationLink paginationArrow" href="?page={{ page_obj.next_page_number }}&search={{ request.GET.search|urlencode }}&problemType={{ request.GET.problemType }}">&rarr;</a>
			{% endif %}
        </div>
        <details>
			<summary>View links to all pages</summary>
            {% with ''|center:page_obj.paginator.num_pages as range %}
            {% for i in range %}
                {% if forloop.counter == page_obj.number %}
                     <a class="paginationLink paginationSelected" href="?page={{ forloop.counter }}&search={{ request.GET.search|urlencode }}&problemType={{ request.GET.problemType }}">{{ forloop.counter }}</a>
                {% else %}
                     <a class="paginationLink" href="?page={{ forloop.counter }}&search={{ request.GET.search|urlencode }}&problemType={{ request.GET.problemType }}">{{ forloop.counter }}</a>
                {% endif %}
            {% endfor %}
            {% endwith %}
        </details>
    </body>
</html>